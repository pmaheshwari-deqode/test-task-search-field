{"version":3,"sources":["mockServer.js","components/SearchField/SearchField.js","App.js","reportWebVitals.js","index.js"],"names":["getRandomBool","n","maxRandomCoeff","Math","floor","random","useStyles","makeStyles","rootContainer","width","padding","matchingText","color","noResultsFound","display","margin","lineBreak","SearchField","searchHandler","dropdownOptions","isLoading","lastSearchedStr","classes","useState","openDropDown","setOpenDropdown","searchInput","setSearchInput","noResults","showNoResults","useEffect","length","Boolean","className","Autocomplete","open","onClose","onOpen","value","getOptionSelected","option","popupIcon","options","loading","onChange","event","values","split","filter","opt","val","join","renderOption","before","after","renderInput","params","TextField","label","variant","target","getLastStr","InputProps","defaultProps","_","noop","App","setOptions","isFetching","setFetching","setLastSearchedStr","postSearchActions","str","debouncedDataFetching","debounce","text","post","results","push","Promise","resolve","reject","randomTimeout","setTimeout","getSuggestions","then","err","console","error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3cbc0029.chunk.js","sourcesContent":["// ================================= Mock Server Start =============================\r\nvar FAILURE_COEFF = 10;\r\nvar MAX_SERVER_LATENCY = 200;\r\n\r\nfunction getRandomBool(n) {\r\n  var maxRandomCoeff = 1000;\r\n  if (n > maxRandomCoeff) n = maxRandomCoeff;\r\n  return Math.floor(Math.random() * maxRandomCoeff) % n === 0;\r\n}\r\n\r\nexport function getSuggestions(text) {\r\n  var pre = \"pre\";\r\n  var post = \"post\";\r\n  var results = [];\r\n  if (getRandomBool(2)) {\r\n    results.push(pre + text);\r\n  }\r\n  if (getRandomBool(2)) {\r\n    results.push(text);\r\n  }\r\n  if (getRandomBool(2)) {\r\n    results.push(text + post);\r\n  }\r\n  if (getRandomBool(2)) {\r\n    results.push(pre + text + post);\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    var randomTimeout = Math.random() * MAX_SERVER_LATENCY;\r\n    setTimeout(() => {\r\n      if (getRandomBool(FAILURE_COEFF)) {\r\n        reject();\r\n      } else {\r\n        resolve(results);\r\n      }\r\n    }, randomTimeout);\r\n  });\r\n}\r\n// ================================= Mock Server End =============================\r\n","import React, { useEffect, useState } from \"react\";\r\nimport _ from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\nimport { TextField, makeStyles } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\n\r\nconst useStyles = makeStyles({\r\n  rootContainer: {\r\n    width: \"500px\",\r\n    padding: \"20px\"\r\n  },\r\n  matchingText: {\r\n    color: \"red\"\r\n  },\r\n  noResultsFound: {\r\n    color: \"red\",\r\n    display: \"block\",\r\n    margin: \"3px\",\r\n    lineBreak: \"anywhere\"\r\n  }\r\n});\r\n\r\nconst SearchField = ({ searchHandler, dropdownOptions, isLoading, lastSearchedStr }) => {\r\n  const classes = useStyles();\r\n  const [openDropDown, setOpenDropdown] = useState(false);\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n  const [noResults, showNoResults] = useState(false);\r\n\r\n  const shouldOpenDropdown = () => {\r\n    // Checking whether dropdown should be open by default\r\n    if (dropdownOptions.length && !isLoading) {\r\n      setOpenDropdown(true);\r\n      showNoResults(false);\r\n    } else if (Boolean(searchInput) && !isLoading) {\r\n      setOpenDropdown(false);\r\n      showNoResults(true);\r\n    }\r\n  };\r\n\r\n  useEffect(shouldOpenDropdown, [dropdownOptions, isLoading]);\r\n\r\n  const getLastStr = (str = searchInput) => {\r\n    // Fetching last string\r\n    const values = str.split(\" \").filter(opt => Boolean(opt));\r\n    return values[values.length - 1];\r\n  }\r\n\r\n  return (\r\n    <div className={classes.rootContainer}>\r\n      <Autocomplete\r\n        open={Boolean(openDropDown && dropdownOptions.length)}\r\n        onClose={() => setOpenDropdown(false)}\r\n        onOpen={() => setOpenDropdown(true)}\r\n        value={searchInput}\r\n        getOptionSelected={(option, value) => option === value}\r\n        popupIcon={null}\r\n        options={dropdownOptions}\r\n        loading={isLoading}\r\n        onChange={(event, value) => {\r\n          // Adding space to the end of the selected\r\n          let values = searchInput.split(\" \").filter(opt => Boolean(opt));\r\n          values[values.length - 1] = value;\r\n          const val = value ? values.join(\" \") + \" \" : \"\";\r\n          setSearchInput(val);\r\n          if (!Boolean(val)) searchHandler(\"\");\r\n          if (!Boolean(value) && noResults) showNoResults(false);\r\n        }}\r\n        renderOption={option => {\r\n          // Highlighting matching sub-string\r\n          const [before, after] = option.split(lastSearchedStr);\r\n          return (\r\n            <span>\r\n              {before}\r\n              <span className={classes.matchingText}>{lastSearchedStr}</span>\r\n              {after}\r\n            </span>\r\n          )\r\n        }}\r\n        renderInput={params => (\r\n          <TextField\r\n            {...params}\r\n            label=\"Search\"\r\n            variant=\"outlined\"\r\n            onChange={({ target }) => {\r\n              setSearchInput(target.value);\r\n              searchHandler(getLastStr(target.value));\r\n            }}\r\n            InputProps={{\r\n              ...params.InputProps\r\n            }}\r\n          />\r\n        )}\r\n      />\r\n      <span className={classes.noResultsFound}>\r\n        {noResults && !isLoading\r\n          ? `No results found for '${lastSearchedStr}'`\r\n          : null}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nSearchField.propTypes = {\r\n  searchHandler: PropTypes.func,\r\n  dropdownOptions: PropTypes.arrayOf(PropTypes.string),\r\n  isLoading: PropTypes.bool,\r\n  lastSearchedStr: PropTypes.string\r\n};\r\n\r\nSearchField.defaultProps = {\r\n  searchHandler: _.noop(),\r\n  dropdownOptions: [],\r\n  isLoading: false,\r\n  lastSearchedStr: \"\"\r\n};\r\n\r\nexport default SearchField;\r\n","import React, { useState } from \"react\";\nimport { debounce } from \"lodash\";\nimport { getSuggestions } from \"./mockServer\";\nimport SearchField from \"./components/SearchField/SearchField\";\n\nfunction App() {\n  const [options, setOptions] = useState([]);\n  const [isFetching, setFetching] = useState(false);\n  const [lastSearchedStr, setLastSearchedStr] = useState(\"\");\n\n  const postSearchActions = (str = \"\") => {\n    // Actions to be performed either on success or error of data fetching.\n    // Updating last searched string and isFetching option.\n    setLastSearchedStr(str);\n    setFetching(false);\n  }\n\n  const fetchData = (value) => {\n    getSuggestions(value).then(\n      results => {\n        // Success\n        setOptions(results);\n        postSearchActions(value);\n      },\n      err => {\n        // Error\n        console.error(\"There was some error while fetching results.\");\n        postSearchActions(value);\n      }\n    );\n  }\n\n  const debouncedDataFetching = debounce(fetchData, 500);\n\n  const searchHandler = (value = \"\") => {\n    setOptions([]);\n    if (value !== \"\"){\n      setFetching(true);\n      debouncedDataFetching(value);\n    }\n  };\n\n  return (\n    <div>\n      <SearchField\n        searchHandler={searchHandler}\n        isLoading={isFetching}\n        dropdownOptions={options}\n        lastSearchedStr={lastSearchedStr}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}